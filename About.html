<!DOCTYPE html>
<html lang="en">
<head>
    <script src="js/Lobotomy.js"></script>
    <script src="js/cloakpage.js"></script>
    <script src="js/AntiTabClose.js"></script>
    <script src="js/chromebookcheck.js"></script>
    <script src="js/background-switcher.js"></script>
    <script src="js/theme-switcher.js"></script>
    <script src="js/lastpage.js"></script>
    <script src="js/ErudaConsole.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fracture | About</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="css/theme-index.css">
    <style>
        body {
            background-color: var(--color-major);
            color: var(--color-text);
            font-family: Arial, sans-serif;
            padding: 20px;
            min-height: 100vh;
            margin: 0;
        }

        br {
    display: block;
    content: "";
    margin-top: 20px; /* Adjust the margin as needed */
}

.wrapper {

    justify-content: center;
            align-items: flex-start;
            display: flex;

}

        .container {
            justify-content: center;
            align-items: flex-start;
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 1300px;
            gap: 20px;
        }

        .about-section {
            flex: 1;
            padding: 20px;
            background-color: rgba(43, 29, 55, 0.5);
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .side-section {
            width: 300px;
        }

        .moderator-section, .latest-commit {
            padding: 20px;
            background-color: var(--color-minor-lesser);
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            height: 350px;
            overflow: scroll;
        }

        .moderator {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .moderator:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .moderator-image-container {
            width: auto;
            height: 50px;
            margin-right: 15px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .moderator-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .moderator-details {
            display: flex;
            flex-direction: column;
        }

        .moderator-name {
            font-weight: bold;
            margin-bottom: 3px;
        }

        .moderator-title {
            font-size: 0.9em;
            color: var(--color-text-muted);
        }

        h2 {
            color: var(--color-accent);
            margin-top: 0;
            margin-bottom: 20px;
        }

        /* Styles for the commit viewer */
        #commit-message {
            font-size: 16px;
            margin-bottom: 10px;
        }

        #commit-details {
            font-size: 14px;
            color: var(--color-text-muted);
            margin-bottom: 15px;
        }

        .tree-segment {
            position: relative;
            margin-left: 1rem;
        }

        .file-icon {
            width: 16px;
            height: 16px;
            margin-right: 5px;
            vertical-align: middle;
        }

        .file-name {
            vertical-align: middle;
        }

        .error-message {
            color: #ff6b6b;
            font-size: 16px;
            text-align: center;
            padding: 20px;
        }

        /* Hide scrollbar for Chrome, Safari and Opera */
        ::-webkit-scrollbar {
            display: none;
        }

        /* Hide scrollbar for Firefox */
        * {
            scrollbar-width: none;
        }

        /* Responsive design */
        @media (max-width: 1024px) {
            .container {
                flex-direction: column;
            }
            
            .about-section {
                margin-right: 0;
                margin-bottom: 20px;
            }
            
            .side-section {
                width: 100%;
            }
        }
        .tree-segment {
            position: relative;
        }
        .tree-segment:not(.tree-root) {
            margin-left: 1rem;
        }
        .tree-segment:not(.tree-root):before,
        .tree-segment:not(.tree-root):after {
            background-color: #e2e8f080;
            content: "";
            display: block;
            position: absolute;
        }
        .tree-segment:not(.tree-root):before {
            top: 0.75rem;
            left: calc(-1rem + 5px);
            width: calc(1rem - 10px);
            height: 2px;
        }
        .tree-segment:not(.tree-root):after {
            left: calc(-1rem + 3px);
            top: 0;
            height: 100%;
            width: 2px;
        }
        .tree-segment:last-child:after {
            height: calc(1rem - 2px);
        }

        @font-face {
            font-family: 'GothamBlack';
            src: url('Fonts/Gotham-Black.otf') format('opentype');
            font-weight: normal;
            font-style: normal;
        }

        .font-monospace {
    font-family: monospace, sans-serif;
}

.latest-commit {
    /* Ensure webkit scrollbar is hidden */
    overflow: hidden;
}

.latest-commit #content {
    /* Allow scrollbar for content inside .latest-commit */
    overflow: auto;
    /* Optionally, you can set a specific height or max-height if needed */
    max-height: 300px; /* Adjust height as per your design */
}

/* Optional: Customize scrollbar styles */
.latest-commit #content::-webkit-scrollbar {
    width: 8px; /* Width of the scrollbar */
}

.latest-commit #content::-webkit-scrollbar-track {
    background: #f1f1f1; /* Track color */
}

.latest-commit #content::-webkit-scrollbar-thumb {
    background-color: #888; /* Thumb color */
    border-radius: 4px; /* Rounded corners */
}

    </style>
          <style>
            .wrapper-menu {

font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
background-color: var(--secondary-color);
color: var(--text-color);
margin: 0;
padding: 0;
display: flex;
flex-direction: column;
align-items: center;

}

            .container1 {
                width: 100%;
                max-width: 1200px;
                padding: 2rem;
                
            }
            .Menuh1 {
                font-size: 3rem;
                font-weight: 700;
                color: var(--primary-color1);
                margin-bottom: 1rem;
                text-align: center;
            }
            .Menuh3 {
                font-size: 1.5rem;
                font-weight: 700;
                color: var(--primary-color1);
                margin-bottom: 1rem;
                text-align: center;
            }
            .NavMenu {
              color:white;
                display: flex;
                justify-content: center;
                gap: 1rem;
                margin-bottom: 2rem;
                flex-wrap: wrap;
            }
            .NavMenu a {
                text-decoration: none;
                color: var(--text-color1);
                font-size: 1rem;
                font-weight: 500;
                transition: color 0.3s ease, background-color 0.3s ease;
                padding: 0.5rem 1rem;
                border-radius: 5px;
            }
            .NavMenu a:hover {
                color:white;
                background-color: var(--hover-color1);
            }
            .divider {
                width: 100%;
                height: 5px;
                background: linear-gradient(to right, transparent, var(--primary-color1), transparent);
                margin-bottom: 2rem;
            }
            .content {
                background-color: #ffffff;
                padding: 2rem;
                border-radius: 10px;
                box-shadow: 0 4px 6px rgba(138, 43, 226, 0.1);
            }
          </style>
<script src="js/navgen.js"></script>
</head>
<body>
    <div class="wrapper-menu">
    <div class="container1">
        <nav class="NavMenu" id="main-nav"></nav>
        <div class="divider"></div>
      </div>
    </div>
<div class="wrapper">
    <div class="container">
        <div class="about-section">
            <!-- Existing about section content -->
            <img class="project-logo" src="Fracture-Minecraft_Title.png" alt="Project Logo" style="max-width: 500px; max-height: 500px;">
            <h2>Statistics:</h2>
            <p>
                <a href="https://github.com/ssh-lvl/Shatter/actions/workflows/pages/pages-build-deployment">
                    <img src="https://github.com/GrayStuido/Fracture/actions/workflows/pages/pages-build-deployment/badge.svg?branch=main" alt="pages-build-deployment">
                </a>
                <img src="https://img.shields.io/github/directory-file-count/ssh-lvl/Shatter" alt="GitHub repo file or directory count">
                <img alt="GitHub repo size" src="https://img.shields.io/github/repo-size/ssh-lvl/Shatter">
                <br>
                <img alt="GitHub commit activity" src="https://img.shields.io/github/commit-activity/t/ssh-lvl/Shatter">
                <img alt="GitHub last commit" src="https://img.shields.io/github/last-commit/ssh-lvl/Shatter">
                <a href="https://github.com/ssh-lvl/Shatter">
                    <img alt="Static Badge" src="https://img.shields.io/badge/View_The_Code-Click_Here-8A2BE2?style=flat&logo=Github">
                </a>
            </p>
            <h2>Info</h2>
            <p>A fork of <a href="https://github.com/gragin0/fracture"></a></p>
            <p>We generaly hope to add more games and features, and improve from <a href="https://github.com/gragin0/fracture"></a></p>
            <h2>Contact</h2>
            <p>We have a support email: <a href="mailto:sshlvl.contact@gmail.com?subject=Hello&body=Message Here">Email Us!</a></p>

            <h2>Terms and Agreements</h2>
            <ol>
                <li><strong>Acceptance of Terms:</strong> By accessing or using Shatter, you acknowledge that you have read, understood, and agree to be bound by these Terms and Agreements. If you do not agree with any part of these terms, please refrain from using our website.</li>
                <br>
                <li><strong>Limitation of Liability:</strong> Shatter and its staff, affiliates, and associates shall not be held liable for any direct, indirect, incidental, special, consequential, or punitive damages arising out of your access to, or use of, our website. This includes, but is not limited to, damages for loss of profits, goodwill, use, data, or other intangible losses.</li>
                <br>
                <li><strong>User Responsibility:</strong> Users agree to take sole responsibility for any academic losses or any other consequences that may arise from the use of our website. Shatter and its staff are not responsible for any academic or personal consequences resulting from the use of our services.</li>
                <br>
                <li><strong>Intellectual Property:</strong> All content on Shatter, including but not limited to text, graphics, logos, images, audio clips, video clips, digital downloads, and software, is the property of Shatter or its content suppliers and is protected by United States and international copyright laws.</li>
                <br>
                <li><strong>Compliance with School Policies:</strong> Teachers and school staff within the state of oregon reserve the right to request the immediate halting and operation of the website by contacting us through our support email: sshlvl.contact@gmail.com. We will promptly address any concerns raised by educational institutions and comply with their requests.</li>
                <br>
                <li><strong>Changes to Website:</strong> Shatter reserves the right to modify, suspend, or discontinue any aspect of the website at any time, including the availability of any features, databases, or content. Users acknowledge and agree that Shatter shall not be liable to you or any third party for any modification, suspension, or discontinuance of the website.</li>
                <br>
                <li><strong>Contact Information:</strong> If you have any questions or concerns regarding these Terms and Agreements, please contact us at sshlvl.contact@gmail.com.</li>
            </ol>
        </div>
        <div class="side-section">
            <div class="moderator-section">
                <h2>Staff</h2>
                <div class="moderator">
                    <div class="moderator-image-container">
                        <img class="moderator-image" src="icons/FractureOwnerLogo-hq.png" alt="Admin">
                    </div>
                    <div class="moderator-details">
                        <span class="moderator-name"></span>
                        <span class="moderator-title">Owner</span>
                    </div>
                </div>
                <div class="moderator">
                    <div class="moderator-image-container">
                        <img class="moderator-image" src="icons/FractureModeratorLogo-hq.svg" alt="Admin">
                    </div>
                    <div class="moderator-details">
                        <span class="moderator-name"></span>
                        <span class="moderator-title">Co-Owner | Admin</span>
                    </div>
                </div>
            </div>

            <div class="latest-commit">
              <h2>Latest Commit</h2>
              <div id="content">
                  <p id="commit-message"></p>
                  <p id="commit-details"></p>
                  <p id="commit-comment"></p>
                  <p id="commit-description"></p>
                  <h3>Affected Files</h3>
                  <div id="affected-files" class="tree-root">•</div>
              </div>
          </div>
        
    </div>
</div>
    <script>
      const apiUrl = 'https://api.github.com/repos/ssh-lvl/Shatter/commits';
    
      function getFileIcon(filename, isDirectory, status) {
    const githubIconsBaseUrl = 'https://raw.githubusercontent.com/primer/octicons/main/icons/';
    
    if (isDirectory) {
        return `${githubIconsBaseUrl}file-directory-16.svg`;
    }

    const statusIconMap = {
        added: `${githubIconsBaseUrl}diff-added-16.svg`,
        removed: `${githubIconsBaseUrl}diff-removed-16.svg`,
        modified: `${githubIconsBaseUrl}diff-modified-16.svg`
    };

    return statusIconMap[status] || `${githubIconsBaseUrl}file-16.svg`;
}

function createFileTree(files) {
    const root = {};
    files.forEach(file => {
        const parts = file.filename.split('/');
        let current = root;
        parts.forEach((part, index) => {
            if (!current[part]) {
                current[part] = index === parts.length - 1 ? { status: file.status } : {};
            }
            current = current[part];
        });
    });
    return root;
}

function getStatusColor(status) {
    switch (status) {
        case 'added':
            return '#3CFF66';
        case 'modified':
            return '#34D3FB';
        case 'removed':
            return '#FF6B6B';
        default:
            return 'inherit';
    }
}

function renderTree(node, parentElement, path = '') {
    const sortedEntries = Object.entries(node).sort(([aName, aChildren], [bName, bChildren]) => {
        if ((aChildren === null) === (bChildren === null)) {
            return aName.localeCompare(bName);
        }
        return aChildren === null ? 1 : -1;
    });

    sortedEntries.forEach(([name, children]) => {
        const segment = document.createElement('div');
        segment.className = 'tree-segment';
        const fullPath = path ? `${path}/${name}` : name;

        const icon = document.createElement('img');
        const isDirectory = children !== null && !children.status;
        icon.src = getFileIcon(name, isDirectory, children.status);
        icon.className = 'file-icon';
        icon.alt = '';

        const nameSpan = document.createElement('span');
        nameSpan.className = 'file-name';
        const statusColor = getStatusColor(children.status);
        nameSpan.style.color = statusColor;
        
        // Set the icon color to match the text color
        icon.style.filter = `invert(1) brightness(0) saturate(100%) sepia(100%) hue-rotate(180deg) brightness(1) contrast(1) invert(1) opacity(0.7)`;
        
        nameSpan.appendChild(document.createTextNode(name));

        segment.appendChild(icon);
        segment.appendChild(nameSpan);

        if (isDirectory) {
            renderTree(children, segment, fullPath);
        }

        parentElement.appendChild(segment);
    });
}

function showErrorMessage(message) {
    const contentDiv = document.getElementById('content');
    contentDiv.innerHTML = `<p class="error-message">${message}</p>`;
}

fetch(apiUrl, {
    headers: {
        'Authorization': `token ${token}`
    }
})
    .then(response => {
        if (!response.ok) {
            if (response.status === 403) {
                throw new Error('API rate limit exceeded');
            }
            throw new Error('Network response was not ok');
        }
        return response.json();
    })
    .then(data => {
        const latestCommit = data[0];
        document.getElementById('commit-message').textContent = latestCommit.commit.message;
        document.getElementById('commit-details').textContent = `#${latestCommit.sha.substring(0, 7)} in ${latestCommit.commit.author.name} - ${new Date(latestCommit.commit.author.date).toLocaleDateString()}`;
        
        return fetch(latestCommit.url, {
            headers: {
                'Authorization': `token ${token}`
            }
        });
    })
    .then(response => {
        if (!response.ok) {
            if (response.status === 403) {
                throw new Error('API rate limit exceeded');
            }
            throw new Error('Network response was not ok');
        }
        return response.json();
    })
    .then(commitData => {
        const fileTree = createFileTree(commitData.files);
        const filesList = document.getElementById('affected-files');
        renderTree(fileTree, filesList);
    })
    .catch(error => {
        console.error('Error:', error);
        if (error.message === 'API rate limit exceeded') {
            showErrorMessage('GitHub API rate limit exceeded. Please try again later.');
        } else {
            showErrorMessage('An error occurred while fetching data. Please try again later.');
        }
    });
          </script>
</body>
</html>
